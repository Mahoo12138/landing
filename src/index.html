<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%- title %></title>
</head>

<body>
  <div id="app">
    <main>
      <section class="spot-light">
        <div class="spot-light__inner">
          <div class="spot-light__ph__main"><span></span></div>
          <div class="spot-light__ph__top"><span></span></div>
          <div class="spot-light__ph__shadow"></div>

          <div class="spot-light__gradient spot-light__obj"></div>

          <div class="spot-light__frame"></div>

          <div class="spot-light__curtain">
            <div class="spot-light__curtain__item -top"></div>
            <div class="spot-light__curtain__item -bottom"></div>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <div class="icp">
        © <%= copyrightYear %>
          <a href="<%= authorUrl %>">
            <%= authorName %>
          </a>
          <a href="<%= icpUrl %>" target="_blank">
            <%= icpNumber %>
          </a>
      </div>
    </footer>
  </div>

  <script>
    // src/scripts/spotlight.js

    document.addEventListener('DOMContentLoaded', () => {
      const spotlightShadow = document.querySelector('.spot-light__ph__shadow');
      let rafId = null;
      let lastX = 0;
      let lastY = 0;

      // 使用节流来控制更新频率
      const updatePosition = (e) => {
        lastX = e.clientX;
        lastY = e.clientY;

        if (!rafId) {
          rafId = requestAnimationFrame(render);
        }
      };

      const render = () => {
        rafId = null;

        // 反转方向：用 100 减去百分比
        const x = 100 - (lastX / window.innerWidth) * 100;
        const y = 100 - (lastY / window.innerHeight) * 100;

        // 使用 transform 来优化性能
        spotlightShadow.style.setProperty('--mouse-x', `${x}%`);
        spotlightShadow.style.setProperty('--mouse-y', `${y}%`);
      };

      document.addEventListener('mousemove', updatePosition, { passive: true });
    });
  </script>
</body>

</html>