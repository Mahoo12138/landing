<!--
 * @Author: Mahoo12138 Mahoo12138@qq.com
 * @Date: 2025-04-22 23:19:16
 * @LastEditors: Mahoo12138 Mahoo12138@qq.com
 * @LastEditTime: 2025-04-23 19:20:45
 * @FilePath: \landing\src\index.html
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%- title %></title>
</head>

<body>
  <div id="app">
    <main>
      <section class="spot-light">
        <div class="spot-light__inner">
          <div class="spot-light__ph__main"><span></span></div>
          <div class="spot-light__ph__top"><span></span></div>
          <div class="spot-light__ph__shadow"></div>

          <div class="spot-light__gradient spot-light__obj"></div>

          <div class="spot-light__frame"></div>

          <div class="spot-light__curtain">
            <div class="spot-light__curtain__item -top"></div>
            <div class="spot-light__curtain__item -bottom"></div>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <div class="icp">
        © <%= copyrightYear %>
          <a href="<%= authorUrl %>">
            <%= authorName %>
          </a>
          <a href="<%= icpUrl %>" target="_blank">
            <%= icpNumber %>
          </a>
      </div>
    </footer>
  </div>

  <script>
    // src/scripts/spotlight.js

    document.addEventListener('DOMContentLoaded', () => {
      const spotlightShadow = document.querySelector('.spot-light__ph__shadow');
      let rafId = null;
      let lastX = 0;
      let lastY = 0;

      // 使用节流来控制更新频率
      const updatePosition = (e) => {
        lastX = e.clientX;
        lastY = e.clientY;

        if (!rafId) {
          rafId = requestAnimationFrame(render);
        }
      };

      const render = () => {
        rafId = null;

        // 计算鼠标位置相对于视窗中心的偏移
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;

        // 计算鼠标与中心点的距离，并限制最大偏移量
        const maxOffset = 25; // 最大偏移百分比
        const dx = (lastX - centerX) / centerX; // 归一化到 -1 到 1 的范围
        const dy = (lastY - centerY) / centerY;

        // 将偏移量转换为百分比，注意这里用 100 减去结果使方向正确
        const x = 100 - (50 + (dx * maxOffset));
        const y = 100 - (50 + (dy * maxOffset));

        // 使用 transform 来优化性能
        spotlightShadow.style.setProperty('--mouse-x', `${x}%`);
        spotlightShadow.style.setProperty('--mouse-y', `${y}%`);
      };

      document.addEventListener('mousemove', updatePosition, { passive: true });
    });
  </script>
</body>

</html>